# Specification of the iTEM MIP3 data template
#
# Each specification has:
# - measure: see measures.yaml. A measure may be repeated in multiple specs.
# - dims: zero or more dimensions. All specifications implicitly have the
#         dimensions Model, Scenario, Region, and Year.
# - exclude: Pandas query() syntax for keys to exclude from the specification/
#            template. More than one may be given. See http://pandas.pydata.org/
#            pandas-docs/stable/reference/api/pandas.DataFrame.query.html


# General exclusions
- exclude:
  - mode != 'road' and vehicle != 'all'
  - type == 'passenger' and vehicle == 'truck'
  - type == 'freight' and mode == 'air'
  - type == 'freight' and vehicle in ['LDV', 'bus', '2W+3W']
  - mode in ['air', 'rail', 'water'] and technology in ['hybrid', 'fc']
  - vehicle == '2W+3W' and technology in ['hybrid', 'fc']

- measure: gdp

- measure: population

- measure: emissions
  dims: [type, mode, vehicle, technology, fuel, ghg, lca_scope]
  exclude:
  - technology == 'combustion' and fuel == 'electricity'
  - technology == 'fc' and fuel != 'hydrogen'
  - technology == 'electric' and fuel != 'electricity'
  - fuel == 'electricity' and lca_scope == 'ttw'

- measure: energy
  dims: [type, mode, vehicle, technology, fuel]
  exclude:
  - technology == 'combustion' and fuel == 'electricity'
  - technology == 'fc' and fuel != 'hydrogen'
  - technology == 'electric' and fuel != 'electricity'

- measure: activity
  dims: [type, mode, vehicle, technology]
  exclude: &excl-act
  # Omit sums by technology across modes
  - mode == 'all' and technology != 'all'

- measure: activity_veh
  dims: [type, mode, vehicle, technology]
  exclude: *excl-act

- measure: sales
  dims: [type, mode, vehicle, technology]
  exclude: &excl2
  - mode != 'road'

- measure: stock
  dims: [type, mode, vehicle, technology]
  exclude: *excl2

- measure: load_factor
  dims: [type, mode, vehicle, technology]
  exclude:
  - technology != 'all'

- measure: intensity
  dims: [type, mode, vehicle, technology, fleet]
